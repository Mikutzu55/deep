{"ast":null,"code":"import React,{useState,useEffect}from'react';import{auth}from'./firebase';import{updateEmail,updatePassword}from'firebase/auth';import{doc,getDoc,updateDoc}from'firebase/firestore';import{db}from'./firebase';import{Button,Form,Alert,Card}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserAccount=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[phone,setPhone]=useState('');const[membership,setMembership]=useState('Free');const[error,setError]=useState('');const[success,setSuccess]=useState('');const user=auth.currentUser;useEffect(()=>{const fetchUserData=async()=>{const docRef=doc(db,'users',user.uid);const docSnap=await getDoc(docRef);if(docSnap.exists()){setPhone(docSnap.data().phone||'');setMembership(docSnap.data().membership||'Free');}};fetchUserData();},[user]);const handleSubmit=async e=>{e.preventDefault();try{if(email!==user.email){await updateEmail(user,email);}if(password){await updatePassword(user,password);}const userRef=doc(db,'users',user.uid);await updateDoc(userRef,{phone,membership});setSuccess('Profile updated successfully!');setTimeout(()=>setSuccess(''),3000);}catch(err){setError(err.message);setTimeout(()=>setError(''),5000);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Account\"}),/*#__PURE__*/_jsxs(Card,{className:\"p-4 shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Membership Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:`badge bg-${membership==='Premium'?'warning':'secondary'}`,children:[membership,\" Member\"]})]}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:user.email})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"New Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Leave blank to keep current\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Phone Number\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"tel\",value:phone,onChange:e=>setPhone(e.target.value),placeholder:\"Enter phone number\"})]}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:success}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Update Profile\"})]})]})]});};export default UserAccount;","map":{"version":3,"names":["React","useState","useEffect","auth","updateEmail","updatePassword","doc","getDoc","updateDoc","db","Button","Form","Alert","Card","jsx","_jsx","jsxs","_jsxs","UserAccount","email","setEmail","password","setPassword","phone","setPhone","membership","setMembership","error","setError","success","setSuccess","user","currentUser","fetchUserData","docRef","uid","docSnap","exists","data","handleSubmit","e","preventDefault","userRef","setTimeout","err","message","className","children","onSubmit","Group","Label","Control","type","value","onChange","target","placeholder","variant"],"sources":["C:/Users/Edi/Desktop/MyWebsite/src/UserAccount.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { auth } from './firebase';\r\nimport { updateEmail, updatePassword } from 'firebase/auth';\r\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\r\nimport { db } from './firebase';\r\nimport { Button, Form, Alert, Card } from 'react-bootstrap';\r\n\r\nconst UserAccount = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [membership, setMembership] = useState('Free');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const user = auth.currentUser;\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      const docRef = doc(db, 'users', user.uid);\r\n      const docSnap = await getDoc(docRef);\r\n      if (docSnap.exists()) {\r\n        setPhone(docSnap.data().phone || '');\r\n        setMembership(docSnap.data().membership || 'Free');\r\n      }\r\n    };\r\n    fetchUserData();\r\n  }, [user]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (email !== user.email) {\r\n        await updateEmail(user, email);\r\n      }\r\n      if (password) {\r\n        await updatePassword(user, password);\r\n      }\r\n\r\n      const userRef = doc(db, 'users', user.uid);\r\n      await updateDoc(userRef, {\r\n        phone,\r\n        membership,\r\n      });\r\n\r\n      setSuccess('Profile updated successfully!');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setTimeout(() => setError(''), 5000);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2>My Account</h2>\r\n      <Card className=\"p-4 shadow\">\r\n        <div className=\"mb-4\">\r\n          <h4>Membership Status</h4>\r\n          <div\r\n            className={`badge bg-${membership === 'Premium' ? 'warning' : 'secondary'}`}\r\n          >\r\n            {membership} Member\r\n          </div>\r\n        </div>\r\n\r\n        <Form onSubmit={handleSubmit}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Email address</Form.Label>\r\n            <Form.Control\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder={user.email}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>New Password</Form.Label>\r\n            <Form.Control\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              placeholder=\"Leave blank to keep current\"\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Phone Number</Form.Label>\r\n            <Form.Control\r\n              type=\"tel\"\r\n              value={phone}\r\n              onChange={(e) => setPhone(e.target.value)}\r\n              placeholder=\"Enter phone number\"\r\n            />\r\n          </Form.Group>\r\n\r\n          {error && <Alert variant=\"danger\">{error}</Alert>}\r\n          {success && <Alert variant=\"success\">{success}</Alert>}\r\n\r\n          <Button variant=\"primary\" type=\"submit\">\r\n            Update Profile\r\n          </Button>\r\n        </Form>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserAccount;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}